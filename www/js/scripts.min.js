// Слайдер
$(document).ready(function() {
  $('.owl-carousel').owlCarousel({
    loop:true, //Зацикливаем слайдер
    margin:0, //Отступ от картино если выводите больше 1
    nav:true, 
    dots:true,
    dotsEach: true,
    autoplay:true, //Автозапуск слайдера
    smartSpeed:1000, //Время движения слайда
    autoplayTimeout:2000, //Время смены слайда
    autoHeight: true,
    responsiveClass: true,
    responsive:{ //Адаптация в зависимости от разрешения экрана
      0:{
        items:1
      },
      769:{
        items:2
      },
      1230:{
        items:3
      }
    }
  });
});


$(".table__col_heading").click(function(){
    $(this).next(".table__accordion").slideToggle();
	$(this).find('.table__acc-button').toggleClass('active');
});


// Hover списков
$('.filters__block').hover(
	function(){
		$(this).addClass('active');
		var totalHeight = 0;
		$(this).find('.filters__container').children().each(function(){
			totalHeight = totalHeight + $(this).outerHeight(true);
		});
		$(this).find('.filters__container').height(totalHeight);
	},
	function(){
		$(this).removeClass('active');
		$(this).find('.filters__container').height(0);
});


// Плавное появление блоков при скролле
window.sr = ScrollReveal();
var fooReveal1 = {delay: 100, distance: '40px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};
var fooReveal2 = {delay: 300, distance: '40px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};
var fooReveal3 = {delay: 500, distance: '40px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};
var fooReveal4 = {delay: 700, distance: '40px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};
sr.reveal('.aboutus__content__image, .aboutus__content__text', fooReveal1);
sr.reveal('.aboutus__advantages__block:nth-child(1), .main-page .services__block:nth-child(1), .main-page .news__block:nth-child(1)', fooReveal2);
sr.reveal('.aboutus__advantages__block:nth-child(2), .main-page .services__block:nth-child(2), .main-page .news__block:nth-child(2)', fooReveal3);
sr.reveal('.aboutus__advantages__block:nth-child(3), .main-page .services__block:nth-child(3), .main-page .news__block:nth-child(3)', fooReveal4);





// Фиксировать экран для самописных модальных окон
function fixscreen() {
  window.scroll = $(window).scrollTop();
  $("body").css('top', -scroll + 'px').toggleClass('noscroll');
}

function unfixscreen() {
  $("body").css('top', "0").toggleClass('noscroll');
  $(window).scrollTop(scroll);
}





// Показ прелоадера при отправке формы
$(document).on({
  ajaxStart: function() { $(".preloader").addClass("active");},
  ajaxStop: function() { $(".preloader").removeClass("active");}
});




// Плавно скрыть/показать блок
function hideblock(el) {
  setTimeout(function() {$(el).show();}, 700);
  setTimeout(function() {$(el).css("opacity", "1");}, 900);
}

function showblock(el) {
  setTimeout(function() {$(el).css("opacity", "0");}, 700);
  setTimeout(function() {$(el).show();}, 900);
}




// Ссылки навигации по странице (добавить класс nav к ссылке с #)
$("a.nav").click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 1200);
});





// Всплывающие окна
$(".fancybox").fancybox({
    fitToView   : false,
    autoSize    : true,
    openEffect  : 'fade',
    closeEffect : 'fade',
	padding		: 0,
});





// Всплывающая галерея картинок
$(".fancyimage").fancybox({
    fitToView   : true,
    autoSize    : true,
    openEffect  : 'fade',
    closeEffect : 'fade',
});





// AJAX форма
$(document).ready(function() {
    $('form').ajaxForm(function() {
        // Успешная отправка формы
        $.fancybox([{href : '#success', fitToView   : false, autoSize    : true, openEffect  : 'fade', closeEffect : 'fade', padding		: 0,}]);
    }); 
}); 





// Маска для поля ввода телефона
$(document).ready(function(){
   $("input[name='tel']").inputmask("+7 (999) 999-99-99");
});





// Кросс-браузерный Placeholder
function supports_input_placeholder() {var i = document.createElement('input'); return 'placeholder' in i;}

if (!supports_input_placeholder()) {
  var fields = document.getElementsByTagName('INPUT');
  for(var i=0; i < fields.length; i++) {
    if(fields[i].hasAttribute('placeholder')) {
      fields[i].defaultValue = fields[i].getAttribute('placeholder');
      fields[i].onfocus = function() { if(this.value == this.defaultValue) this.value = ''; }
      fields[i].onblur = function() { if(this.value == '') this.value = this.defaultValue; }
    }
  }
}
